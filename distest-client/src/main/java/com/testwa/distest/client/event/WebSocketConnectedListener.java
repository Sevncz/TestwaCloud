package com.testwa.distest.client.event;import com.github.cosysoft.device.android.AndroidDevice;import com.github.cosysoft.device.android.impl.AndroidDeviceStore;import com.testwa.distest.client.service.GrpcClientService;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.ApplicationListener;import org.springframework.scheduling.annotation.Async;import org.springframework.stereotype.Component;import java.util.TreeSet;@Slf4j@Componentpublic class WebSocketConnectedListener implements ApplicationListener<WebSocketConnectedEvent> {    @Autowired    private GrpcClientService grpcClientService;    @Async    @Override    public void onApplicationEvent(WebSocketConnectedEvent webSocketConnectedEvent) {        log.info("Event: Websocket Connected, Remote Client and init all device");        TreeSet<AndroidDevice> androidDevices = AndroidDeviceStore.getInstance().getDevices();        for (AndroidDevice ad : androidDevices) {            if(ad.isDeviceReady()){                grpcClientService.initDevice(ad);                grpcClientService.createRemoteClient(ad.getDevice());            }        }    }}