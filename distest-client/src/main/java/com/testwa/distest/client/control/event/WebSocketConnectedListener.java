package com.testwa.distest.client.control.event;import com.github.cosysoft.device.android.AndroidDevice;import com.github.cosysoft.device.android.impl.AndroidDeviceStore;import com.testwa.distest.client.grpc.GrpcClient;import com.testwa.distest.client.service.GrpcClientService;import io.grpc.Channel;import lombok.extern.log4j.Log4j2;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.context.ApplicationListener;import org.springframework.scheduling.annotation.Async;import org.springframework.stereotype.Component;import java.util.TreeSet;@Log4j2@Componentpublic class WebSocketConnectedListener implements ApplicationListener<WebSocketConnectedEvent> {    @GrpcClient("local-grpc-server")    private Channel serverChannel;    @Autowired    private GrpcClientService grpcClientService;    @Async    @Override    public void onApplicationEvent(WebSocketConnectedEvent webSocketConnectedEvent) {        log.info("Event: Websocket Connected, Remote Client and init all device");        TreeSet<AndroidDevice> androidDevices = AndroidDeviceStore.getInstance().getDevices();        for (AndroidDevice ad : androidDevices) {            grpcClientService.createRemoteClient(ad.getDevice());            grpcClientService.initDevice(ad);        }    }}