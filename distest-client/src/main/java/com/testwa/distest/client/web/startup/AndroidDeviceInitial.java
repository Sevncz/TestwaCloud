package com.testwa.distest.client.web.startup;import com.github.cosysoft.device.android.AndroidDevice;import com.testwa.distest.client.android.AndroidHelper;import com.testwa.distest.client.service.GrpcClientService;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.CommandLineRunner;import org.springframework.core.annotation.Order;import org.springframework.stereotype.Component;import java.util.Set;/** * @Program: distest * @Description: 在启动应用的时候检查当前挂载的android设备 * @Author: wen * @Create: 2018-05-08 14:50 **/@Slf4j@Order(value=2)@Componentpublic class AndroidDeviceInitial implements CommandLineRunner {    @Autowired    private GrpcClientService grpcClientService;    @Override    public void run(String... strings) throws Exception {        Set<AndroidDevice> ads = AndroidHelper.getInstance().getAllDevices();        ads.forEach(d -> {            grpcClientService.initDevice(d);        });    }}