package com.testwa.distest.client.event;import com.testwa.distest.client.grpc.GrpcClient;import com.testwa.distest.client.grpc.Gvice;import io.grpc.Channel;import io.rpc.testwa.device.DisconnectedRequest;import lombok.extern.slf4j.Slf4j;import org.springframework.context.ApplicationListener;import org.springframework.scheduling.annotation.Async;import org.springframework.stereotype.Component;@Slf4j@Componentpublic class DeviceOfflineListener implements ApplicationListener<DeviceDisconnectEvent> {    @GrpcClient("local-grpc-server")    private Channel serverChannel;    @Async    @Override    public void onApplicationEvent(DeviceDisconnectEvent event) {        log.info("Event: device " + event.getDeviceId() + " offline");        DisconnectedRequest request = DisconnectedRequest.newBuilder()                .setDeviceId(event.getDeviceId())                .build();        Gvice.deviceService(serverChannel).disconnect(request);    }}