package com.testwa.distest.client.control.client.callback;import com.github.cosysoft.device.shell.AndroidSdk;import com.google.protobuf.ByteString;import com.testwa.distest.client.android.AndroidHelper;import com.testwa.distest.client.control.client.DeviceClient;import lombok.extern.slf4j.Slf4j;import org.openqa.selenium.os.CommandLine;import java.io.IOException;/** * @Program: distest * @Description: * @Author: wen * @Create: 2018-05-08 20:23 **/@Slf4jpublic class InputCallback implements ICallBack<String> {    private DeviceClient client;    public InputCallback(DeviceClient client){        this.client = client;    }    @Override    public void callback(ByteString bytes) {        String cmd = bytes.toStringUtf8();        log.info(client + ":callback-log" + cmd);        try {            CommandLine commandLine = new CommandLine(AndroidSdk.adb().getCanonicalPath(),                    "-s",                    client.getClientId(),                    "shell",                    "ime",                    "set",                    "com.android.adbkeyboard/.AdbIME"            );            commandLine.execute();        } catch (IOException e) {            e.printStackTrace();        }        try {            CommandLine commandLine = new CommandLine(AndroidSdk.adb().getCanonicalPath(),                    "-s",                    client.getClientId(),                    "shell",                    "am",                    "broadcast",                    "-a",                    "ADB_INPUT_TEXT",                    "--es",                    "msg",                    cmd            );            commandLine.execute();        } catch (IOException e) {            e.printStackTrace();        }    }}