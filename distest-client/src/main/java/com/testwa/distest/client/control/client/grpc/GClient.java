package com.testwa.distest.client.control.client.grpc;import com.testwa.distest.client.control.client.Clients;import io.grpc.ManagedChannel;import io.grpc.ManagedChannelBuilder;import io.rpc.testwa.device.DeviceServiceGrpc;import io.rpc.testwa.task.TaskServiceGrpc;import org.slf4j.Logger;import org.slf4j.LoggerFactory;public class GClient {    private static Logger log = LoggerFactory.getLogger(GClient.class);    private String host;    private Integer port;    private ManagedChannel channel;    public GClient(String host, Integer port) {        this.host = host;        this.port = port;        this.start();    }    public void destory(){        if(this.channel != null){            this.channel.shutdown();        }    }    public void reset() {        if(this.channel != null){            this.channel.shutdown();            this.start();        }    }    public Boolean isShutdown() {        if(this.channel != null){            return this.channel.isShutdown() || this.channel.isTerminated();        }        return true;    }    public void start(){        this.channel = ManagedChannelBuilder.forAddress(this.host, this.port)                .usePlaintext(true)                .build();    }    public DeviceServiceGrpc.DeviceServiceFutureStub deviceService() {        final DeviceServiceGrpc.DeviceServiceFutureStub stub = DeviceServiceGrpc.newFutureStub(this.channel);        return stub;    }    public TaskServiceGrpc.TaskServiceFutureStub taskService() {        final TaskServiceGrpc.TaskServiceFutureStub stub = TaskServiceGrpc.newFutureStub(this.channel);        return stub;    }}