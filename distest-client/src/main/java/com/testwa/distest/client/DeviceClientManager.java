package com.testwa.distest.client;import lombok.extern.slf4j.Slf4j;import java.util.ArrayList;import java.util.List;import java.util.concurrent.ConcurrentHashMap;/** * @Program: distest * @Description: * @Author: wen * @Create: 2018-05-08 19:20 **/@Slf4jpublic class DeviceClientManager {    private static volatile ConcurrentHashMap<String, DeviceClient> deviceClientMap = new ConcurrentHashMap<>();    public static void add(String serial, DeviceClient client){        deviceClientMap.put(serial, client);    }    public static DeviceClient get(String serial){        return deviceClientMap.get(serial);    }    public static List<DeviceClient> all(){        return new ArrayList<>(deviceClientMap.values());    }    public static void remove(String serial){        DeviceClient dc = deviceClientMap.get(serial);        if(dc != null && dc.checkCanStop()){            dc.logoutFromServer();            dc.stop();            dc = null;            deviceClientMap.remove(serial);        }    }}