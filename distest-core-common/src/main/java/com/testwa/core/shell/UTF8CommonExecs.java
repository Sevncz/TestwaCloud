package com.testwa.core.shell;import org.apache.commons.exec.CommandLine;import org.apache.commons.exec.DefaultExecutor;import org.apache.commons.exec.ExecuteWatchdog;import org.apache.commons.exec.PumpStreamHandler;import java.io.ByteArrayOutputStream;import java.io.IOException;/** * @Program: distest * @Description: 支持字符编码设置 * @Author: wen * @Create: 2018-04-17 11:30 **/public class UTF8CommonExecs extends AbstractCommonExecs{    private CommandLine commandLine;    private Boolean isEncode;    /**     *@Description:     *@Param: [commandLine]     *@Return:     *@Author: wen     *@Date:     */    public UTF8CommonExecs(CommandLine commandLine) {        super(commandLine);        this.commandLine = commandLine;    }    /* (non-Javadoc)     * @see com.bingosoft.proxy.helper.AbstractCommonExecs#supportWatchdog()     */    @Override    public boolean supportWatchdog() {        return true;    }    /* (non-Javadoc)     * @see com.bingosoft.proxy.helper.AbstractCommonExecs#getWatchdog()     */    @Override    public ExecuteWatchdog getWatchdog() {        return new ExecuteWatchdog(20000l);    }    public void unableEncoding() {        isEncode = false;    }    public void ableEncoding() {        isEncode = true;    }    public String getEncoding() {        return "UTF-8";    }    public String exec() throws IOException {        DefaultExecutor executor = new DefaultExecutor();        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();        ByteArrayOutputStream errorStream = new ByteArrayOutputStream();        PumpStreamHandler streamHandler = new PumpStreamHandler(outputStream,errorStream);        executor.setStreamHandler(streamHandler);        executor.execute(this.commandLine);        String out = outputStream.toString(getEncoding());  //设置编码        return out;    }}