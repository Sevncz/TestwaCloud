package com.testwa.distest.server.web.task.controller;import com.testwa.core.base.constant.WebConstants;import com.testwa.core.base.controller.BaseController;import com.testwa.core.base.exception.ObjectNotExistsException;import com.testwa.core.base.vo.Result;import com.testwa.distest.server.entity.Task;import com.testwa.distest.server.mongo.service.AppiumRunningLogService;import com.testwa.distest.server.mongo.service.CrashLogService;import com.testwa.distest.server.mongo.service.StepService;import com.testwa.distest.server.service.task.service.AppiumFileService;import com.testwa.distest.server.service.task.service.TaskService;import com.testwa.distest.server.service.user.service.UserService;import com.testwa.distest.server.web.project.validator.ProjectValidator;import com.testwa.distest.server.web.task.execute.JRReportMgr;import com.testwa.distest.server.web.task.execute.ReportMgr;import com.testwa.distest.server.web.task.validator.StepValidatoer;import com.testwa.distest.server.web.task.validator.TaskValidatoer;import com.testwa.distest.server.web.task.vo.JRTaskBaseInfoVO;import io.swagger.annotations.Api;import io.swagger.annotations.ApiOperation;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.*;import java.util.Map;/** * @Program: distest * @Description: 兼容测试独有的报告 * @Author: wen * @Create: 2018-05-30 11:05 **/@Slf4j@Api("兼容测试报告")@RestController@RequestMapping(path = WebConstants.API_PREFIX + "/JR/report")public class JRReportController extends BaseController {    @Autowired    private TaskValidatoer taskValidatoer;    @Autowired    private JRReportMgr jrReportMgr;    @ApiOperation(value="兼容测试任务基本统计信息，包括测试设备数量、执行时长、Bug数量、闪退数量")    @ResponseBody    @GetMapping(value = "/baseinfo/{taskId}")    public Result baseInfo(@PathVariable Long taskId) throws ObjectNotExistsException {        Task task = taskValidatoer.validateTaskExist(taskId);        JRTaskBaseInfoVO vo = jrReportMgr.getBaseInfo(task);        return ok(vo);    }    @ApiOperation(value="四大步骤的错误信息")    @ResponseBody    @GetMapping(value = "/error/{taskId}")    public Result errorList(@PathVariable Long taskId) throws ObjectNotExistsException {        Task task = taskValidatoer.validateTaskExist(taskId);        JRTaskBaseInfoVO vo = jrReportMgr.getBaseInfo(task);        return ok(vo);    }}