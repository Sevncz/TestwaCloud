package com.testwa.distest.server.service.mq;import com.alibaba.fastjson.JSON;import com.testwa.distest.server.entity.User;import io.rpc.testwa.msg.Register;import io.rpc.testwa.msg.UserInfo;import org.springframework.amqp.core.AmqpTemplate;import org.springframework.amqp.rabbit.core.RabbitMessagingTemplate;import org.springframework.beans.BeanUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;/** * @Program: distest * @Description: * @Author: wen * @Create: 2018-05-31 11:43 **/@Servicepublic class MQService {    @Autowired    private RabbitMessagingTemplate rabbitMessagingTemplate;    public void sendActiveEmail(User user) {        UserInfo userInfo = UserInfo.newBuilder()                .setEmail(user.getEmail())                .setIsActive(user.getIsActive())                .setUsername(user.getUsername())                .build();        Register register = Register.newBuilder()                .setUser(userInfo)                .setUrl("http://www.testwa.com")                .build();        rabbitMessagingTemplate.convertAndSend("exchange.emailactivesender", "queue.emailactivesender", register);    }}